{"ast":null,"code":"import _defineProperty from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\photo\\\\home\\\\Mytravel\\\\Front-End-ReactJs\\\\travel-new\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import AddIntroduce from'./AddIntroduce';import PaginationTable from'../../common/PaginationTable';import postsService from'../../../services/postsService';import{CKEditor}from'@ckeditor/ckeditor5-react';import ClassicEditor from'@ckeditor/ckeditor5-build-classic';import RowIntroduce from'./RowIntroduce';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function IntroduceAdmin(){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),introduces=_useState4[0],setIntroduces=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),introduceUpdate=_useState6[0],setIntroduceUpdate=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),idDelete=_useState8[0],setIdDelete=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),introduce=_useState10[0],setIntroduce=_useState10[1];var handleDelete=function handleDelete(id){var deleteIntroduce=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return postsService.remove(id);case 2:setIdDelete(id);case 3:case\"end\":return _context.stop();}}},_callee);}));return function deleteIntroduce(_x){return _ref.apply(this,arguments);};}();try{var answer=window.confirm(\"bạn thật sự muốn xóa\");if(answer){deleteIntroduce(id);}}catch(error){console.log(\"Fail call api \"+error);}};var getIdUpdate=function getIdUpdate(introduce){setIntroduceUpdate(introduce);setIntroduce(introduce);};var handleUpdate=function handleUpdate(){var data=_objectSpread(_objectSpread({},introduce),introduceUpdate);var FormData=require('form-data');var blogData=new FormData();blogData.append('title',data.title);// Iterate over all selected files\nblogData.append('file',data.file);blogData.append('detail',data.detail);blogData.append('numberView',data.numberView?data.numberView:0);blogData.append('numberLike',data.numberLike?data.numberLike:0);var update=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,data){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return postsService.update(id,data);case 2:alert('sửa thành công');document.location.reload(true);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function update(_x2,_x3){return _ref2.apply(this,arguments);};}();var create=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return postsService.create(data);case 2:alert('thêm mới thành công');document.location.reload(true);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function create(_x4){return _ref3.apply(this,arguments);};}();try{if(data.id){update(data.id,blogData);}else{create(blogData);}}catch(error){console.log(\"Fail call api \"+error);}};//phân trang\nvar increment=function increment(page){setPage(page);};var fethApi=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(page){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return postsService.getByPage(page);case 2:response=_context4.sent;setIntroduces(response.data.data);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function fethApi(_x5){return _ref4.apply(this,arguments);};}();useEffect(function(){try{fethApi(page);}catch(err){console.log(\"Fail call api \"+err);}},[page,introduceUpdate,idDelete]);var setParams=function setParams(event){console.log(\"event go\");if(event.target.name!==\"file\"){setIntroduceUpdate(_objectSpread(_objectSpread({},introduceUpdate),{},_defineProperty({},event.target.name,event.target.value)));}else{setIntroduceUpdate(_objectSpread(_objectSpread({},introduceUpdate),{},_defineProperty({},event.target.name,event.target.files[0])));}};var handleCkEditor=function handleCkEditor(event,editor){setIntroduceUpdate(_objectSpread(_objectSpread({},introduceUpdate),{},{'detail':editor.getData()}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AddIntroduce,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container \",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title-add\",children:\"Danh s\\xE1ch b\\xE0i vi\\u1EBFt gi\\u1EDBi thi\\u1EC7u\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Id\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"ti\\xEAu \\u0111\\u1EC1\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u1EA2nh\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Chi ti\\u1EBFt\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0110\\u0103ng ng\\xE0y\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{id:\"show_table\",children:introduces&&Array.from(introduces.pageRespDtos).map(function(introduce,index){return/*#__PURE__*/_jsx(RowIntroduce,{handleDelete:handleDelete,getIdUpdate:getIdUpdate,introduce:introduce},index);})})]}),/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"Page navigation example\",children:/*#__PURE__*/_jsx(PaginationTable,{onClick:increment,totalPage:introduces===null||introduces===void 0?void 0:introduces.totalPage})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal fade bd-example-modal-lg kkkk\",id:\"exampleModal\",tabIndex:-1,role:\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-lg\",role:\"document\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title \",id:\"exampleModalLabel\",children:\"Modal title\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"c\\u1EADp nh\\u1EADt b\\xE0i vi\\u1EBFt gi\\u1EDBi thi\\u1EC7u \"+(introduce===null||introduce===void 0?void 0:introduce.id),\" \"]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"T\\xEAn ti\\xEAu \\u0111\\u1EC1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"input\",name:\"title\",className:\"title form-control\",onChange:setParams,value:introduceUpdate===null||introduceUpdate===void 0?void 0:introduceUpdate.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleFormControlFile1\",children:\"Ch\\u1ECDn \\u1EA3nh\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"file\",className:\"form-control-file\",multiple:\"multiple\",onChange:setParams})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleFormControlFile1\",children:\"M\\xF4 t\\u1EA3\"}),/*#__PURE__*/_jsx(CKEditor,{editor:ClassicEditor,name:\"detail\",onReady:function onReady(editor){},onChange:handleCkEditor,data:introduceUpdate===null||introduceUpdate===void 0?void 0:introduceUpdate.detail})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary btn-submit\",onClick:handleUpdate,children:\"Submit\"})]})})]})})})]});}export default IntroduceAdmin;","map":{"version":3,"sources":["D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/src/components/admin/introduce_admin/IntroduceAdmin.js"],"names":["React","useEffect","useState","AddIntroduce","PaginationTable","postsService","CKEditor","ClassicEditor","RowIntroduce","IntroduceAdmin","page","setPage","introduces","setIntroduces","introduceUpdate","setIntroduceUpdate","idDelete","setIdDelete","introduce","setIntroduce","handleDelete","id","deleteIntroduce","remove","answer","window","confirm","error","console","log","getIdUpdate","handleUpdate","data","FormData","require","blogData","append","title","file","detail","numberView","numberLike","update","alert","document","location","reload","create","increment","fethApi","getByPage","response","err","setParams","event","target","name","value","files","handleCkEditor","editor","getData","Array","from","pageRespDtos","map","index","totalPage"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport AddIntroduce from './AddIntroduce'\r\nimport PaginationTable from '../../common/PaginationTable'\r\nimport postsService from '../../../services/postsService'\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react'\r\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic'\r\nimport RowIntroduce from './RowIntroduce'\r\n\r\nfunction IntroduceAdmin() {\r\n    const [page, setPage] = useState(1);\r\n    const [introduces, setIntroduces] = useState();\r\n    const [introduceUpdate,setIntroduceUpdate] = useState();\r\n    const [idDelete, setIdDelete] = useState(0);\r\n    \r\n    const [introduce,setIntroduce] = useState();\r\n  \r\n  \r\n    const handleDelete = (id) => {\r\n      const deleteIntroduce = async (id)=>{\r\n        await postsService.remove(id);   \r\n        setIdDelete(id);\r\n     }\r\n     try{\r\n      const answer = window.confirm(\"bạn thật sự muốn xóa\");\r\n      if (answer) {\r\n        deleteIntroduce(id);\r\n    }      \r\n    }catch(error) {\r\n      console.log(\"Fail call api \"+error);\r\n      }\r\n    }\r\n  \r\n  \r\n    const getIdUpdate = (introduce) => {\r\n      setIntroduceUpdate(introduce);\r\n      setIntroduce(introduce);\r\n    }\r\n    const handleUpdate = ()=>{\r\n      const data = {...introduce,...introduceUpdate}\r\n \r\n     var FormData = require('form-data');\r\n     const blogData = new FormData();\r\n     blogData.append('title', data.title);\r\n      // Iterate over all selected files\r\n      blogData.append('file',data.file);\r\n     blogData.append('detail',data.detail);\r\n     blogData.append('numberView',data.numberView?data.numberView:0);\r\n     blogData.append('numberLike',data.numberLike?data.numberLike:0);\r\n     \r\n  \r\n     const update = async (id,data)=>{\r\n     await postsService.update(id, data);    \r\n     alert('sửa thành công') \r\n     document.location.reload(true);   \r\n    }\r\n    const create = async (data)=>{\r\n      await postsService.create(data);    \r\n      alert('thêm mới thành công') \r\n      document.location.reload(true);    \r\n     }\r\n     try{\r\n       if(data.id){\r\n        update(data.id, blogData); \r\n       }else{\r\n        create(blogData);\r\n       }\r\n       \r\n         \r\n          \r\n     }catch(error) {\r\n         console.log(\"Fail call api \"+error);\r\n         }\r\n    }\r\n   \r\n    \r\n   \r\n    \r\n  \r\n     //phân trang\r\n     const increment = (page) => {\r\n      setPage(page)\r\n    }\r\n      const fethApi = async (page)=>{\r\n        const response= await postsService.getByPage(page);    \r\n        setIntroduces(response.data.data);\r\n    }\r\n      useEffect( ()=>{\r\n          try{\r\n              fethApi(page);\r\n          }\r\n          catch(err){\r\n              console.log(\"Fail call api \"+err);\r\n        } \r\n      },[page,introduceUpdate,idDelete])\r\n  \r\n  \r\n  \r\n  \r\n      const setParams = (event) => {\r\n        console.log(\"event go\");\r\n        if(event.target.name!==\"file\"){\r\n            setIntroduceUpdate({...introduceUpdate,[event.target.name]:event.target.value});\r\n        }else{\r\n            setIntroduceUpdate({...introduceUpdate,[event.target.name]:event.target.files[0]});\r\n        }  \r\n    }\r\n    const handleCkEditor = (event, editor) => {\r\n        setIntroduceUpdate({...introduceUpdate,'detail':editor.getData()})\r\n   }\r\n   \r\n    return (\r\n        <>\r\n        <AddIntroduce/>\r\n        <div className=\"container \">\r\n          <h2 className=\"title-add\">Danh sách bài viết giới thiệu</h2>\r\n          <div className=\"row form\">\r\n            <div className=\"col-12\">\r\n               \r\n              <table className=\"table table-bordered\">\r\n                <thead>\r\n                  <tr>\r\n                    <th scope=\"col\">Id</th>\r\n                    <th scope=\"col\">tiêu đề</th>\r\n                    <th scope=\"col\">Ảnh</th>\r\n                    <th scope=\"col\">Chi tiết</th>\r\n                    <th scope=\"col\">Đăng ngày</th>\r\n                    <th scope=\"col\">Action</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody id=\"show_table\"  >\r\n                {\r\n              introduces&&Array.from(introduces.pageRespDtos).map((introduce,index) => {\r\n                        return (                               \r\n                          <RowIntroduce  key={index}  handleDelete={handleDelete} getIdUpdate={getIdUpdate} introduce={introduce} />                              \r\n                            )\r\n                        })  \r\n            }                            \r\n                </tbody>\r\n              </table>\r\n            <nav aria-label=\"Page navigation example\">\r\n                 <PaginationTable onClick={increment}   totalPage={introduces?.totalPage}/>\r\n            </nav>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"modal fade bd-example-modal-lg kkkk\" id=\"exampleModal\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div className=\"modal-dialog modal-lg\" role=\"document\">\r\n      <div className=\"modal-content\">\r\n        <div className=\"modal-header\">\r\n          <h5 className=\"modal-title \" id=\"exampleModalLabel\">Modal title</h5>\r\n          <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n            <span aria-hidden=\"true\">×</span>\r\n          </button>\r\n        </div>\r\n        <div className=\"modal-body\">\r\n        <form>\r\n        <div className=\"form-group\">\r\n        <h2>{`cập nhật bài viết giới thiệu `+ introduce?.id} </h2>\r\n            <label htmlFor=\"exampleInputEmail1\">Tên tiêu đề</label>\r\n            <input type=\"input\" name=\"title\" className=\"title form-control\" onChange={setParams}   value={introduceUpdate?.title}    />\r\n        </div>\r\n        <div className=\"form-group\">    \r\n            <label htmlFor=\"exampleFormControlFile1\">Chọn ảnh</label>\r\n            <input type=\"file\" name=\"file\" className=\"form-control-file\" multiple=\"multiple\" onChange={setParams}   />\r\n        </div>\r\n        <div className=\"form-group\">    \r\n            <label htmlFor=\"exampleFormControlFile1\">Mô tả</label>\r\n            <CKEditor \r\n                editor={ClassicEditor}\r\n                name = \"detail\"\r\n                onReady={ editor =>{\r\n                }\r\n              }\r\n              onChange={handleCkEditor}\r\n              \r\n              data={introduceUpdate?.detail}\r\n                />\r\n        </div>           \r\n        <button type=\"button\" className=\"btn btn-primary btn-submit\" onClick={handleUpdate}>Submit</button>\r\n      </form>\r\n        </div>\r\n         \r\n      </div>\r\n    </div>\r\n  </div>      \r\n\r\n      </>\r\n    )\r\n}\r\n\r\nexport default IntroduceAdmin\r\n"]},"metadata":{},"sourceType":"module"}