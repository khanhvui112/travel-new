{"ast":null,"code":"var _jsxFileName = \"D:\\\\photo\\\\home\\\\Mytravel\\\\Front-End-ReactJs\\\\travel-new\\\\src\\\\components\\\\admin\\\\place_admin\\\\FormPlace.js\",\n    _s = $RefreshSig$();\n\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { PlaceContext } from '../../../contexts/PlaceContext';\nimport placesService from '../../../services/placesService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction FormPlace() {\n  _s();\n\n  const {\n    idUpdate\n  } = useContext(PlaceContext);\n  const [placeUpdate, setPlaceUpdate] = useState();\n  const [place, setPlace] = useState();\n\n  const handleCkEditor = (event, editor) => {\n    setPlaceUpdate({ ...placeUpdate,\n      'detail': editor.getData()\n    });\n  };\n\n  const getBlogById = async id => {\n    try {\n      const response = await placesService.get(id);\n\n      if (response.data.success) {\n        setPlaceUpdate(response.data.data);\n        setPlace(response.data.data);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    getBlogById(idUpdate);\n  }, [idUpdate]);\n\n  const handleUpdate = () => {\n    const data = { ...place,\n      ...placeUpdate\n    };\n\n    var FormData = require('form-data');\n\n    const placeData = new FormData();\n    placeData.append('name', data.name);\n    placeData.append('address', data.address);\n    placeData.append('price', data.price); // Iterate over all selected files\n\n    Array.from(data.file).forEach(file => {\n      placeData.append('files', file);\n    });\n    placeData.append('detail', data.detail);\n    placeData.append('numberView', data.numberView);\n    placeData.append('numberComment', data.numberComment);\n    placeData.append('numberLike', data.numberLike);\n\n    const update = async (id, data) => {\n      await placesService.update(id, data);\n    };\n\n    try {\n      update(localStorage.getItem('id_place'), placeData);\n      alert(\"Cập nhật thành công\");\n      document.location.reload(true);\n    } catch (error) {\n      console.log(\"Fail call api \" + error);\n    }\n  };\n\n  const setParams = event => {\n    if (event.target.name !== \"file\") {\n      setPlaceUpdate({ ...placeUpdate,\n        [event.target.name]: event.target.value\n      });\n    } else {\n      setPlaceUpdate({ ...placeUpdate,\n        [event.target.name]: event.target.files\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\" c\\u1EADp nh\\u1EADt \\u0111\\u1ECBa \\u0111i\\u1EC3m du l\\u1ECBch \", idUpdate]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"exampleInputEmail1\",\n        children: \"T\\xEAn \\u0111\\u1ECBa \\u0111i\\u1EC3m\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"input\",\n        name: \"name\",\n        className: \"title form-control\",\n        onChange: setParams,\n        value: placeUpdate === null || placeUpdate === void 0 ? void 0 : placeUpdate.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"exampleFormControlTextarea1\",\n        children: \"\\u0110\\u1ECBa \\u0111i\\u1EC3m\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"input\",\n        name: \"address\",\n        className: \"title form-control\",\n        onChange: setParams,\n        value: placeUpdate === null || placeUpdate === void 0 ? void 0 : placeUpdate.address\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"exampleFormControlTextarea1\",\n        children: \"Gi\\xE1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"input\",\n        name: \"price\",\n        className: \"title form-control\",\n        onChange: setParams,\n        value: placeUpdate === null || placeUpdate === void 0 ? void 0 : placeUpdate.price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"exampleFormControlFile1\",\n        children: \"Ch\\u1ECDn \\u1EA3nh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        name: \"file\",\n        className: \"form-control-file\",\n        multiple: \"multiple\",\n        onChange: setParams\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"exampleFormControlFile1\",\n        children: \"M\\xF4 t\\u1EA3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(CKEditor, {\n        editor: ClassicEditor,\n        name: \"detail\",\n        onReady: editor => {},\n        onChange: handleCkEditor,\n        data: placeUpdate === null || placeUpdate === void 0 ? void 0 : placeUpdate.detail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary btn-submit\",\n      onClick: handleUpdate,\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n}\n\n_s(FormPlace, \"ZeA1fTRQU/F+JaG9qrHGVqmI8nk=\");\n\n_c = FormPlace;\nexport default FormPlace;\n\nvar _c;\n\n$RefreshReg$(_c, \"FormPlace\");","map":{"version":3,"sources":["D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/src/components/admin/place_admin/FormPlace.js"],"names":["ClassicEditor","CKEditor","React","useContext","useEffect","useState","PlaceContext","placesService","FormPlace","idUpdate","placeUpdate","setPlaceUpdate","place","setPlace","handleCkEditor","event","editor","getData","getBlogById","id","response","get","data","success","err","console","log","handleUpdate","FormData","require","placeData","append","name","address","price","Array","from","file","forEach","detail","numberView","numberComment","numberLike","update","localStorage","getItem","alert","document","location","reload","error","setParams","target","value","files"],"mappings":";;;AAAA,OAAOA,aAAP,MAA0B,mCAA1B;AACA,SAASC,QAAT,QAAyB,2BAAzB;AACA,OAAOC,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,SAASC,YAAT,QAA6B,gCAA7B;AACA,OAAOC,aAAP,MAA0B,iCAA1B;;;AAEA,SAASC,SAAT,GAAqB;AAAA;;AACjB,QAAM;AAACC,IAAAA;AAAD,MAAaN,UAAU,CAACG,YAAD,CAA7B;AACA,QAAM,CAACI,WAAD,EAAaC,cAAb,IAA+BN,QAAQ,EAA7C;AACA,QAAM,CAACO,KAAD,EAAOC,QAAP,IAAmBR,QAAQ,EAAjC;;AAGA,QAAMS,cAAc,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACtCL,IAAAA,cAAc,CAAC,EAAC,GAAGD,WAAJ;AAAgB,gBAASM,MAAM,CAACC,OAAP;AAAzB,KAAD,CAAd;AACF,GAFF;;AAIC,QAAMC,WAAW,GAAG,MAAOC,EAAP,IAAY;AAC7B,QAAI;AACA,YAAMC,QAAQ,GAAE,MAAMb,aAAa,CAACc,GAAd,CAAkBF,EAAlB,CAAtB;;AACA,UAAGC,QAAQ,CAACE,IAAT,CAAcC,OAAjB,EAA0B;AACtBZ,QAAAA,cAAc,CAACS,QAAQ,CAACE,IAAT,CAAcA,IAAf,CAAd;AACAT,QAAAA,QAAQ,CAACO,QAAQ,CAACE,IAAT,CAAcA,IAAf,CAAR;AACC;AACR,KAND,CAME,OAAME,GAAN,EAAW;AACTC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH;AACJ,GAVA;;AAWApB,EAAAA,SAAS,CAAC,MAAM;AACbc,IAAAA,WAAW,CAACT,QAAD,CAAX;AACF,GAFQ,EAEN,CAACA,QAAD,CAFM,CAAT;;AAIA,QAAMkB,YAAY,GAAG,MAAK;AACvB,UAAML,IAAI,GAAG,EAAC,GAAGV,KAAJ;AAAU,SAAGF;AAAb,KAAb;;AAEA,QAAIkB,QAAQ,GAAGC,OAAO,CAAC,WAAD,CAAtB;;AACA,UAAMC,SAAS,GAAG,IAAIF,QAAJ,EAAlB;AACAE,IAAAA,SAAS,CAACC,MAAV,CAAiB,MAAjB,EAAyBT,IAAI,CAACU,IAA9B;AACAF,IAAAA,SAAS,CAACC,MAAV,CAAiB,SAAjB,EAA4BT,IAAI,CAACW,OAAjC;AACAH,IAAAA,SAAS,CAACC,MAAV,CAAiB,OAAjB,EAA0BT,IAAI,CAACY,KAA/B,EAPuB,CAQtB;;AACDC,IAAAA,KAAK,CAACC,IAAN,CAAYd,IAAI,CAACe,IAAjB,EAAuBC,OAAvB,CAA+BD,IAAI,IAAI;AACnCP,MAAAA,SAAS,CAACC,MAAV,CAAiB,OAAjB,EAA0BM,IAA1B;AACH,KAFD;AAGAP,IAAAA,SAAS,CAACC,MAAV,CAAiB,QAAjB,EAA0BT,IAAI,CAACiB,MAA/B;AACAT,IAAAA,SAAS,CAACC,MAAV,CAAiB,YAAjB,EAA8BT,IAAI,CAACkB,UAAnC;AACAV,IAAAA,SAAS,CAACC,MAAV,CAAiB,eAAjB,EAAiCT,IAAI,CAACmB,aAAtC;AACAX,IAAAA,SAAS,CAACC,MAAV,CAAiB,YAAjB,EAA8BT,IAAI,CAACoB,UAAnC;;AAGA,UAAMC,MAAM,GAAG,OAAOxB,EAAP,EAAUG,IAAV,KAAiB;AAC5B,YAAMf,aAAa,CAACoC,MAAd,CAAqBxB,EAArB,EAAyBG,IAAzB,CAAN;AACP,KAFG;;AAGA,QAAG;AACCqB,MAAAA,MAAM,CAACC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAD,EAAmCf,SAAnC,CAAN;AACAgB,MAAAA,KAAK,CAAC,qBAAD,CAAL;AACAC,MAAAA,QAAQ,CAACC,QAAT,CAAkBC,MAAlB,CAAyB,IAAzB;AACH,KAJD,CAIC,OAAMC,KAAN,EAAa;AACVzB,MAAAA,OAAO,CAACC,GAAR,CAAY,mBAAiBwB,KAA7B;AACC;AACR,GA5BA;;AA+BA,QAAMC,SAAS,GAAIpC,KAAD,IAAW;AAC1B,QAAGA,KAAK,CAACqC,MAAN,CAAapB,IAAb,KAAoB,MAAvB,EAA8B;AAC1BrB,MAAAA,cAAc,CAAC,EAAC,GAAGD,WAAJ;AAAgB,SAACK,KAAK,CAACqC,MAAN,CAAapB,IAAd,GAAoBjB,KAAK,CAACqC,MAAN,CAAaC;AAAjD,OAAD,CAAd;AACH,KAFD,MAEK;AACD1C,MAAAA,cAAc,CAAC,EAAC,GAAGD,WAAJ;AAAgB,SAACK,KAAK,CAACqC,MAAN,CAAapB,IAAd,GAAoBjB,KAAK,CAACqC,MAAN,CAAaE;AAAjD,OAAD,CAAd;AACH;AACJ,GANA;;AASD,sBACI;AAAA,4BACA;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,8BACA;AAAA,qFAAgC7C,QAAhC;AAAA;AAAA;AAAA;AAAA;AAAA,cADA,eAEI;AAAO,QAAA,OAAO,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,eAGI;AAAO,QAAA,IAAI,EAAC,OAAZ;AAAoB,QAAA,IAAI,EAAC,MAAzB;AAAgC,QAAA,SAAS,EAAC,oBAA1C;AAA+D,QAAA,QAAQ,EAAE0C,SAAzE;AAAsF,QAAA,KAAK,EAAEzC,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAEsB;AAA1G;AAAA;AAAA;AAAA;AAAA,cAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADA,eAMA;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,8BACI;AAAO,QAAA,OAAO,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAO,QAAA,IAAI,EAAC,OAAZ;AAAoB,QAAA,IAAI,EAAC,SAAzB;AAAmC,QAAA,SAAS,EAAC,oBAA7C;AAAkE,QAAA,QAAQ,EAAEmB,SAA5E;AAAuF,QAAA,KAAK,EAAEzC,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAEuB;AAA3G;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YANA,eAUA;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,8BACI;AAAO,QAAA,OAAO,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAO,QAAA,IAAI,EAAC,OAAZ;AAAoB,QAAA,IAAI,EAAC,OAAzB;AAAiC,QAAA,SAAS,EAAC,oBAA3C;AAAgE,QAAA,QAAQ,EAAEkB,SAA1E;AAAuF,QAAA,KAAK,EAAEzC,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAEwB;AAA3G;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAVA,eAcA;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,8BACI;AAAO,QAAA,OAAO,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,IAAI,EAAC,MAAxB;AAA+B,QAAA,SAAS,EAAC,mBAAzC;AAA6D,QAAA,QAAQ,EAAC,UAAtE;AAAiF,QAAA,QAAQ,EAAEiB;AAA3F;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAdA,eAkBA;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,8BACI;AAAO,QAAA,OAAO,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,QAAC,QAAD;AACI,QAAA,MAAM,EAAEnD,aADZ;AAEI,QAAA,IAAI,EAAG,QAFX;AAGI,QAAA,OAAO,EAAGgB,MAAM,IAAG,CAClB,CAJL;AAME,QAAA,QAAQ,EAAEF,cANZ;AAQE,QAAA,IAAI,EAAEJ,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAE6B;AARrB;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAlBA,eA+BA;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAC,4BAAhC;AAA6D,MAAA,OAAO,EAAEZ,YAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YA/BA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAoCC;;GArGInB,S;;KAAAA,S;AA0GT,eAAeA,SAAf","sourcesContent":["import ClassicEditor from '@ckeditor/ckeditor5-build-classic'\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react'\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { PlaceContext } from '../../../contexts/PlaceContext';\r\nimport placesService from '../../../services/placesService';\r\n\r\nfunction FormPlace() {\r\n    const {idUpdate} = useContext(PlaceContext);\r\n    const [placeUpdate,setPlaceUpdate] = useState();\r\n    const [place,setPlace] = useState();\r\n     \r\n     \r\n    const handleCkEditor = (event, editor) => {\r\n        setPlaceUpdate({...placeUpdate,'detail':editor.getData()})\r\n     }\r\n    \r\n     const getBlogById = async (id)=>{\r\n        try {\r\n            const response= await placesService.get(id);\r\n            if(response.data.success) {\r\n                setPlaceUpdate(response.data.data);\r\n                setPlace(response.data.data);\r\n                }           \r\n        } catch(err) {\r\n            console.log(err);     \r\n        }     \r\n    }\r\n     useEffect(() => {\r\n        getBlogById(idUpdate);\r\n     }, [idUpdate])\r\n    \r\n     const handleUpdate = () =>{\r\n        const data = {...place,...placeUpdate};\r\n\r\n        var FormData = require('form-data');\r\n        const placeData = new FormData();\r\n        placeData.append('name', data.name);\r\n        placeData.append('address', data.address);\r\n        placeData.append('price', data.price);\r\n         // Iterate over all selected files\r\n        Array.from( data.file).forEach(file => {\r\n            placeData.append('files', file);\r\n        });\r\n        placeData.append('detail',data.detail);\r\n        placeData.append('numberView',data.numberView);\r\n        placeData.append('numberComment',data.numberComment);\r\n        placeData.append('numberLike',data.numberLike);\r\n        \r\n    \r\n        const update = async (id,data)=>{\r\n            await placesService.update(id, data);    \r\n    }\r\n        try{\r\n            update(localStorage.getItem('id_place'), placeData); \r\n            alert(\"Cập nhật thành công\")\r\n            document.location.reload(true);   \r\n        }catch(error) {\r\n            console.log(\"Fail call api \"+error);\r\n            }\r\n    }\r\n     \r\n    \r\n     const setParams = (event) => {\r\n        if(event.target.name!==\"file\"){\r\n            setPlaceUpdate({...placeUpdate,[event.target.name]:event.target.value});\r\n        }else{\r\n            setPlaceUpdate({...placeUpdate,[event.target.name]:event.target.files});\r\n        }  \r\n    }\r\n     \r\n     \r\n    return (\r\n        <form>\r\n        <div className=\"form-group\">\r\n        <h2> cập nhật địa điểm du lịch {idUpdate}</h2>\r\n            <label htmlFor=\"exampleInputEmail1\">Tên địa điểm</label>\r\n            <input type=\"input\" name=\"name\" className=\"title form-control\" onChange={setParams}   value={placeUpdate?.name}    />\r\n        </div>\r\n        <div className=\"form-group\">\r\n            <label htmlFor=\"exampleFormControlTextarea1\">Địa điểm</label>\r\n            <input type=\"input\" name=\"address\" className=\"title form-control\" onChange={setParams} value={placeUpdate?.address}    />       \r\n        </div>\r\n        <div className=\"form-group\">\r\n            <label htmlFor=\"exampleFormControlTextarea1\">Giá</label>\r\n            <input type=\"input\" name=\"price\" className=\"title form-control\" onChange={setParams}   value={placeUpdate?.price}    />       \r\n        </div>\r\n        <div className=\"form-group\">    \r\n            <label htmlFor=\"exampleFormControlFile1\">Chọn ảnh</label>\r\n            <input type=\"file\" name=\"file\" className=\"form-control-file\" multiple=\"multiple\" onChange={setParams}   />\r\n        </div>\r\n        <div className=\"form-group\">    \r\n            <label htmlFor=\"exampleFormControlFile1\">Mô tả</label>\r\n            <CKEditor \r\n                editor={ClassicEditor}\r\n                name = \"detail\"\r\n                onReady={ editor =>{\r\n                }\r\n              }\r\n              onChange={handleCkEditor}\r\n              \r\n              data={placeUpdate?.detail}\r\n                />\r\n        </div>           \r\n        <button type=\"button\" className=\"btn btn-primary btn-submit\" onClick={handleUpdate}>Submit</button>\r\n      </form>\r\n        \r\n    )\r\n    }\r\n    \r\n\r\n \r\n\r\nexport default FormPlace\r\n"]},"metadata":{},"sourceType":"module"}