{"ast":null,"code":"import _defineProperty from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\photo\\\\home\\\\Mytravel\\\\Front-End-ReactJs\\\\travel-new\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import PaginationTable from'../../common/PaginationTable';import RowRestaurant from'./RowRestaurant';import restaurantService from'../../../services/RestaurantService';import{CKEditor}from'@ckeditor/ckeditor5-react';import ClassicEditor from'@ckeditor/ckeditor5-build-classic';import AddRestaurant from'./AddRestaurant';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function RestaurantAdmin(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),restaurants=_useState2[0],setRestaurants=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),idDelete=_useState4[0],setIdDelete=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),restaurant=_useState6[0],setRestaurant=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),restaurantUpdate=_useState8[0],setRestaurantUpdate=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),page=_useState10[0],setPage=_useState10[1];var getIdUpdate=function getIdUpdate(restaurant){setRestaurantUpdate(restaurant);setRestaurant(restaurant);};var handleDelete=function handleDelete(id){var deleteHotel=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return restaurantService.remove(id);case 2:setIdDelete(id);case 3:case\"end\":return _context.stop();}}},_callee);}));return function deleteHotel(_x){return _ref.apply(this,arguments);};}();try{var answer=window.confirm(\"bạn thật sự muốn xóa\");if(answer){deleteHotel(id);}}catch(error){console.log(\"Fail call api \"+error);}};//phân trang\nvar increment=function increment(page){setPage(page);};var fethApi=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(page){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return restaurantService.getByPage(page);case 2:response=_context2.sent;setRestaurants(response.data.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fethApi(_x2){return _ref2.apply(this,arguments);};}();useEffect(function(){try{fethApi(page);}catch(err){console.log(\"Fail call api \"+err);}},[page,idDelete]);var setParams=function setParams(event){if(event.target.name!==\"file\"){setRestaurantUpdate(_objectSpread(_objectSpread({},restaurantUpdate),{},_defineProperty({},event.target.name,event.target.value)));}else{setRestaurantUpdate(_objectSpread(_objectSpread({},restaurantUpdate),{},_defineProperty({},event.target.name,event.target.files)));}};var handleCkEditor=function handleCkEditor(event,editor){setRestaurantUpdate(_objectSpread(_objectSpread({},restaurantUpdate),{},{'detail':editor.getData()}));};var handleUpdate=function handleUpdate(){var data=_objectSpread(_objectSpread({},restaurant),restaurantUpdate);console.log(data.file);var FormData=require('form-data');var blogData=new FormData();blogData.append('name',data.name);blogData.append('address',data.address);blogData.append('price',data.price);// Iterate over all selected files\nArray.from(data.file).forEach(function(file){blogData.append('files',file);});blogData.append('detail',data.detail);blogData.append('numberView',data.numberView?data.numberView:0);blogData.append('numberLike',data.numberLike?data.numberLike:0);blogData.append('email',data.email);blogData.append('phone',data.phone);var update=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id,data){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return restaurantService.update(id,data);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function update(_x3,_x4){return _ref3.apply(this,arguments);};}();var create=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return restaurantService.create(data);case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function create(_x5){return _ref4.apply(this,arguments);};}();try{if(data.id){update(data.id,blogData);alert(\"cập nhật thành công\");}else{create(blogData);alert(\"thêm mới thành công\");}document.location.reload(true);}catch(error){console.log(\"Fail call api \"+error);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsx(AddRestaurant,{})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container \",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title-add\",children:\"Danh s\\xE1ch qu\\xE1n \\u0103n\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Id\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"T\\xEAn\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0110\\u1ECBa ch\\u1EC9\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u1EA2nh\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Chi ti\\u1EBFt\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"\\u0110\\u0103ng ng\\xE0y\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{id:\"show_table\",children:restaurants?Array.from(restaurants.pageRespDtos).map(function(restaurant,index){return/*#__PURE__*/_jsx(RowRestaurant,{handleDelete:handleDelete,getIdUpdate:getIdUpdate,restaurant:restaurant},index);}):\"\"})]}),/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"Page navigation example\",children:/*#__PURE__*/_jsx(PaginationTable,{onClick:increment,totalPage:restaurants===null||restaurants===void 0?void 0:restaurants.totalPage})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal fade bd-example-modal-lg kkkk\",id:\"exampleModal\",tabIndex:-1,role:\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-lg\",role:\"document\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title \",id:\"exampleModalLabel\",children:\"Modal title\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"mb-5\",children:[\"S\\u1EEDa qu\\xE1n \\u0103n \",restaurant===null||restaurant===void 0?void 0:restaurant.id]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"T\\xEAn \\u0111\\u1ECBa \\u0111i\\u1EC3m\"}),/*#__PURE__*/_jsx(\"input\",{type:\"input\",name:\"name\",className:\"title form-control\",onChange:setParams,value:restaurantUpdate===null||restaurantUpdate===void 0?void 0:restaurantUpdate.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleFormControlTextarea1\",children:\"\\u0110\\u1ECBa \\u0111i\\u1EC3m\"}),/*#__PURE__*/_jsx(\"input\",{type:\"input\",name:\"address\",className:\"title form-control\",onChange:setParams,value:restaurantUpdate===null||restaurantUpdate===void 0?void 0:restaurantUpdate.address})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleFormControlTextarea1\",children:\"\\u0110i\\u1EC7n tho\\u1EA1i li\\xEAn h\\u1EC7\"}),/*#__PURE__*/_jsx(\"input\",{type:\"input\",name:\"phone\",className:\"title form-control\",onChange:setParams,value:restaurantUpdate===null||restaurantUpdate===void 0?void 0:restaurantUpdate.phone})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleFormControlFile1\",children:\"Ch\\u1ECDn \\u1EA3nh\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"file\",className:\"form-control-file\",multiple:\"multiple\",onChange:setParams})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleFormControlFile1\",children:\"M\\xF4 t\\u1EA3\"}),/*#__PURE__*/_jsx(CKEditor,{editor:ClassicEditor,name:\"detail\",onReady:function onReady(editor){},onChange:handleCkEditor,data:restaurantUpdate===null||restaurantUpdate===void 0?void 0:restaurantUpdate.detail})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary btn-submit\",onClick:handleUpdate,children:\"Submit\"})]})})]})})})]});}export default RestaurantAdmin;","map":{"version":3,"sources":["D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/src/components/admin/restaurant_admin/RestaurantAdmin.js"],"names":["React","useEffect","useState","PaginationTable","RowRestaurant","restaurantService","CKEditor","ClassicEditor","AddRestaurant","RestaurantAdmin","restaurants","setRestaurants","idDelete","setIdDelete","restaurant","setRestaurant","restaurantUpdate","setRestaurantUpdate","page","setPage","getIdUpdate","handleDelete","id","deleteHotel","remove","answer","window","confirm","error","console","log","increment","fethApi","getByPage","response","data","err","setParams","event","target","name","value","files","handleCkEditor","editor","getData","handleUpdate","file","FormData","require","blogData","append","address","price","Array","from","forEach","detail","numberView","numberLike","email","phone","update","create","alert","document","location","reload","pageRespDtos","map","index","totalPage"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport PaginationTable from '../../common/PaginationTable'\r\nimport RowRestaurant from './RowRestaurant'\r\nimport restaurantService from '../../../services/RestaurantService'\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\r\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic'\r\nimport AddRestaurant from './AddRestaurant'\r\n\r\nfunction RestaurantAdmin() {\r\n  const [restaurants, setRestaurants] = useState();\r\n  const [idDelete, setIdDelete] = useState();\r\n  const [restaurant, setRestaurant] = useState();\r\n  const [restaurantUpdate, setRestaurantUpdate] = useState();\r\n   \r\n  const [page, setPage] = useState(1);\r\n   \r\n \r\n\r\n  const getIdUpdate = (restaurant) => {\r\n    setRestaurantUpdate(restaurant)\r\n    setRestaurant(restaurant);\r\n  }\r\n  const handleDelete = (id) => {\r\n    const deleteHotel = async (id)=>{\r\n      await restaurantService.remove(id);  \r\n      setIdDelete(id);\r\n   }\r\n    try {\r\n      const answer = window.confirm(\"bạn thật sự muốn xóa\");\r\n      if (answer) {\r\n        deleteHotel(id);  \r\n    }     \r\n        \r\n    } catch(error) {\r\n      console.log(\"Fail call api \"+error);\r\n    }\r\n  }\r\n  //phân trang\r\n  const increment = (page) => {\r\n    setPage(page)\r\n  }\r\n    const fethApi = async (page)=>{\r\n      const response= await restaurantService.getByPage(page);    \r\n      setRestaurants(response.data.data);\r\n  }\r\n    useEffect( ()=>{\r\n        try{\r\n            fethApi(page);\r\n        }\r\n        catch(err){\r\n            console.log(\"Fail call api \"+err);\r\n      } \r\n    },[page,idDelete])\r\n\r\n    const setParams = (event) => {\r\n      if(event.target.name!==\"file\"){\r\n          setRestaurantUpdate({...restaurantUpdate,[event.target.name]:event.target.value});       \r\n      }else{\r\n        setRestaurantUpdate({...restaurantUpdate,[event.target.name]:event.target.files});\r\n        \r\n      }  \r\n  }\r\n  const handleCkEditor = (event, editor) => {\r\n    setRestaurantUpdate({...restaurantUpdate,'detail':editor.getData()})\r\n     \r\n }\r\n const handleUpdate = ()=>{\r\n  const data = {...restaurant,...restaurantUpdate}\r\n  console.log(data.file);\r\n  \r\n   \r\n var FormData = require('form-data');\r\n const blogData = new FormData();\r\n blogData.append('name', data.name);\r\n blogData.append('address', data.address);\r\n blogData.append('price', data.price);\r\n  // Iterate over all selected files\r\n Array.from( data.file).forEach(file => {\r\n  blogData.append('files', file);\r\n });\r\n blogData.append('detail',data.detail);\r\n blogData.append('numberView',data.numberView?data.numberView:0);\r\n blogData.append('numberLike',data.numberLike?data.numberLike:0);\r\n blogData.append('email',data.email);\r\n blogData.append('phone',data.phone);\r\n \r\n\r\n const update = async (id,data)=>{\r\n    await restaurantService.update(id, data);    \r\n\r\n}\r\nconst create = async (data)=>{\r\n    await restaurantService.create(data);    \r\n }\r\n try{\r\n   if(data.id){\r\n    update(data.id, blogData); \r\n    alert(\"cập nhật thành công\")\r\n   }else{\r\n    create(blogData);\r\n    alert(\"thêm mới thành công\")\r\n   }\r\n   document.location.reload(true);   \r\n   \r\n     \r\n      \r\n }catch(error) {\r\n     console.log(\"Fail call api \"+error);\r\n     }\r\n}\r\n  \r\n\r\n    return (\r\n         <>\r\n         <div className=\"container\">\r\n         <div className=\"modal-body\">\r\n          <AddRestaurant/>\r\n        </div>\r\n         </div>\r\n        <div className=\"container \">\r\n          <h2 className=\"title-add\">Danh sách quán ăn</h2>\r\n          <div className=\"row form\">\r\n            <div className=\"col-12\">\r\n               \r\n              <table className=\"table table-bordered\">\r\n                <thead>\r\n                  <tr>\r\n                    <th scope=\"col\">Id</th>\r\n                    <th scope=\"col\">Tên</th>\r\n                    <th scope=\"col\">Địa chỉ</th>\r\n                    <th scope=\"col\">Ảnh</th>\r\n                    <th scope=\"col\">Chi tiết</th>\r\n                    <th scope=\"col\">Số điện thoại</th>\r\n                    <th scope=\"col\">Đăng ngày</th>\r\n                    <th scope=\"col\">Action</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody id=\"show_table\"  >\r\n                {\r\n                    restaurants?  Array.from(restaurants.pageRespDtos).map((restaurant,index) => {\r\n                        return (                               \r\n                          <RowRestaurant handleDelete={handleDelete} getIdUpdate={getIdUpdate} key={index} restaurant={restaurant} />                              \r\n                            )\r\n                        }) :\"\"   \r\n                }                               \r\n                </tbody>\r\n              </table>\r\n            <nav aria-label=\"Page navigation example\">\r\n                 <PaginationTable onClick={increment}   totalPage={restaurants?.totalPage}/>\r\n            </nav>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"modal fade bd-example-modal-lg kkkk\" id=\"exampleModal\" tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n    <div className=\"modal-dialog modal-lg\" role=\"document\">\r\n      <div className=\"modal-content\">\r\n        <div className=\"modal-header\">\r\n          <h5 className=\"modal-title \" id=\"exampleModalLabel\">Modal title</h5>\r\n          <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n            <span aria-hidden=\"true\">×</span>\r\n          </button>\r\n        </div>\r\n        <div className=\"modal-body\">\r\n        <form>\r\n        <div className=\"form-group\">\r\n        <h2 className=\"mb-5\">Sửa quán ăn {restaurant?.id}</h2>\r\n            <label htmlFor=\"exampleInputEmail1\">Tên địa điểm</label>\r\n            <input type=\"input\" name=\"name\" className=\"title form-control\" onChange={setParams}   value={restaurantUpdate?.name}    />\r\n        </div>\r\n        <div className=\"form-group\">\r\n            <label htmlFor=\"exampleFormControlTextarea1\">Địa điểm</label>\r\n            <input type=\"input\" name=\"address\" className=\"title form-control\" onChange={setParams} value={restaurantUpdate?.address}    />       \r\n        </div>\r\n        <div className=\"form-group\">\r\n            <label htmlFor=\"exampleFormControlTextarea1\">Điện thoại liên hệ</label>\r\n            <input type=\"input\" name=\"phone\" className=\"title form-control\" onChange={setParams} value={restaurantUpdate?.phone}    />       \r\n        </div>\r\n        <div className=\"form-group\">    \r\n            <label htmlFor=\"exampleFormControlFile1\">Chọn ảnh</label>\r\n            <input type=\"file\" name=\"file\" className=\"form-control-file\" multiple=\"multiple\" onChange={setParams}   />\r\n        </div>\r\n        <div className=\"form-group\">    \r\n            <label htmlFor=\"exampleFormControlFile1\">Mô tả</label>\r\n            <CKEditor \r\n                editor={ClassicEditor}\r\n                name = \"detail\"\r\n                onReady={ editor =>{\r\n                }\r\n              }\r\n              onChange={handleCkEditor}\r\n              \r\n              data={restaurantUpdate?.detail}\r\n                />\r\n        </div>           \r\n        <button type=\"button\" className=\"btn btn-primary btn-submit\" onClick={handleUpdate}>Submit</button>\r\n      </form>\r\n        </div>\r\n         \r\n      </div>\r\n    </div>\r\n  </div>   \r\n        </>\r\n    )\r\n}\r\n\r\nexport default RestaurantAdmin\r\n"]},"metadata":{},"sourceType":"module"}