{"ast":null,"code":"import _defineProperty from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\photo\\\\home\\\\Mytravel\\\\Front-End-ReactJs\\\\travel-new\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import ClassicEditor from'@ckeditor/ckeditor5-build-classic';import{CKEditor}from'@ckeditor/ckeditor5-react';import blogService from'../../../services/blogsService';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function FormBlog(_ref){var id=_ref.id,isUpdate=_ref.isUpdate,updateBlog=_ref.updateBlog;var _useState=useState({\"title\":\"\",\"detailSummary\":\"\",\"file\":null}),_useState2=_slicedToArray(_useState,2),blog=_useState2[0],setBlog=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),detail=_useState4[0],setDtail=_useState4[1];var getBlogById=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return blogService.get(id);case 3:response=_context.sent;if(response.data.success){setBlog(response.data.data);updateBlog(response.data.data);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getBlogById(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){getBlogById(localStorage.getItem('id_blog'));},[id,isUpdate]);var setParams=function setParams(event){if(event.target.name!==\"file\"){setBlog(_objectSpread(_objectSpread({},blog),{},_defineProperty({},event.target.name,event.target.value)));}else{setBlog(_objectSpread(_objectSpread({},blog),{},_defineProperty({},event.target.name,event.target.files[0])));}};var handleCkEditor=function handleCkEditor(event,editor){setDtail(editor.getData());};var handleSubmit=function handleSubmit(event){var FormData=require('form-data');var data=new FormData();data.append('title',blog.title);data.append('detailSummary',blog.detailSummary);data.append('file',blog.file);data.append('detail',detail);var update=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,data){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return blogService.update(id,data);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function update(_x2,_x3){return _ref3.apply(this,arguments);};}();try{document.location.reload(true);update(localStorage.getItem('id_blog'),data);alert(\"Sửa thành công\");document.location.reload(true);}catch(error){console.log(\"Fail call api \"+error);}};return/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"c\\u1EADp nh\\u1EADt b\\xE0i vi\\u1EBFt \",localStorage.getItem('id_blog')]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"Ti\\xEAu \\u0111\\u1EC1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"input\",name:\"title\",className:\"title form-control\",onChange:setParams,value:blog.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleFormControlTextarea1\",children:\" T\\xF3m t\\u1EAFt chi ti\\u1EBFt\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",name:\"detailSummary\",rows:3,onChange:setParams,value:blog.detailSummary})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleFormControlFile1\",children:\"Ch\\u1ECDn \\u1EA3nh\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"file\",className:\"form-control-file\",onChange:setParams})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleFormControlFile1\",children:\"M\\xF4 t\\u1EA3\"}),/*#__PURE__*/_jsx(CKEditor,{name:\"detail\",editor:ClassicEditor,onReady:function onReady(editor){},onChange:handleCkEditor,data:blog.detail})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary btn-submit\",onClick:handleSubmit,children:\"Submit\"})]});}export default FormBlog;","map":{"version":3,"sources":["D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/src/components/admin/blog_admin/FormBlog.js"],"names":["React","useEffect","useState","ClassicEditor","CKEditor","blogService","FormBlog","id","isUpdate","updateBlog","blog","setBlog","detail","setDtail","getBlogById","get","response","data","success","console","log","localStorage","getItem","setParams","event","target","name","value","files","handleCkEditor","editor","getData","handleSubmit","FormData","require","append","title","detailSummary","file","update","document","location","reload","alert","error"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic'\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react'\r\nimport blogService from '../../../services/blogsService'\r\n\r\n\r\nfunction FormBlog({id,isUpdate,updateBlog}) {  \r\n     \r\n    const [blog, setBlog] = useState({\"title\":\"\",\"detailSummary\":\"\",\"file\":null});\r\n    const [detail,setDtail] = useState(\"\");\r\n\r\n    const getBlogById = async (id)=>{\r\n      try {\r\n          const response= await blogService.get(id);\r\n          if(response.data.success) {\r\n            setBlog(response.data.data);\r\n            updateBlog(response.data.data);\r\n              }           \r\n      } catch(err) {\r\n          console.log(err);         \r\n      }     \r\n  }\r\n\r\n     useEffect(() => {\r\n        getBlogById(localStorage.getItem('id_blog'));\r\n     },[id,isUpdate])\r\n     \r\n    \r\n    \r\n\r\n  const setParams = (event) => {\r\n    if(event.target.name!==\"file\"){\r\n      setBlog({...blog,[event.target.name]:event.target.value});\r\n    }else{\r\n      setBlog({...blog,[event.target.name]:event.target.files[0]});\r\n    }  \r\n}\r\n  const handleCkEditor = (event,editor) => {\r\n     setDtail(editor.getData());\r\n  }\r\n\r\n\r\n  const handleSubmit = (event) => {\r\n     \r\n     \r\n    var FormData = require('form-data');\r\n    const data = new FormData();\r\n    data.append('title', blog.title);\r\n    data.append('detailSummary', blog.detailSummary);\r\n    data.append('file', blog.file);\r\n    data.append('detail', detail);\r\n    const update = async (id,data)=>{\r\n      await blogService.update(id,data);    \r\n  }  \r\n    try{\r\n      document.location.reload(true); \r\n      update(localStorage.getItem('id_blog'),data); \r\n      alert(\"Sửa thành công\") \r\n      document.location.reload(true); \r\n    }catch(error) {\r\n          console.log(\"Fail call api \"+error);\r\n      }\r\n      \r\n \r\n     \r\n    }\r\n    return (\r\n        <form>\r\n            <div className=\"form-group\">\r\n            <h2>cập nhật bài viết {localStorage.getItem('id_blog')}</h2>\r\n                <label htmlFor=\"exampleInputEmail1\">Tiêu đề</label>\r\n                <input type=\"input\" name=\"title\" className=\"title form-control\" onChange={setParams} value={blog.title}    />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"exampleFormControlTextarea1\"> Tóm tắt chi tiết</label>\r\n                <textarea className=\"form-control\" name=\"detailSummary\"  rows={3}  onChange={setParams} value={blog.detailSummary}    />       \r\n            </div>\r\n            <div className=\"form-group\">    \r\n                <label htmlFor=\"exampleFormControlFile1\">Chọn ảnh</label>\r\n                <input type=\"file\" name=\"file\" className=\"form-control-file\" onChange={setParams} />\r\n            </div>\r\n            <div className=\"form-group\">    \r\n                <label htmlFor=\"exampleFormControlFile1\">Mô tả</label>\r\n                <CKEditor \r\n                    name = \"detail\"\r\n                    editor={ClassicEditor}\r\n                    onReady={ editor =>{\r\n                    }\r\n                  }\r\n                  onChange={handleCkEditor}\r\n                  data={blog.detail}\r\n                    />\r\n            </div>           \r\n            <button type=\"button\" className=\"btn btn-primary btn-submit\" onClick={handleSubmit}>Submit</button>\r\n          </form>\r\n    )\r\n}\r\n\r\nexport default FormBlog\r\n"]},"metadata":{},"sourceType":"module"}