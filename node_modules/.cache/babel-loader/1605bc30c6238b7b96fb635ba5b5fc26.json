{"ast":null,"code":"import _defineProperty from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _asyncToGenerator from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\photo\\\\home\\\\Mytravel\\\\Front-End-ReactJs\\\\travel-new\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import ClassicEditor from'@ckeditor/ckeditor5-build-classic';import{CKEditor}from'@ckeditor/ckeditor5-react';import React,{useContext,useEffect,useState}from'react';import{PlaceContext}from'../../../contexts/PlaceContext';import placesService from'../../../services/placesService';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function FormPlace(){var _useContext=useContext(PlaceContext),idUpdate=_useContext.idUpdate;var _useState=useState(),_useState2=_slicedToArray(_useState,2),placeUpdate=_useState2[0],setPlaceUpdate=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),place=_useState4[0],setPlace=_useState4[1];var handleCkEditor=function handleCkEditor(event,editor){setPlaceUpdate(_objectSpread(_objectSpread({},placeUpdate),{},{'detail':editor.getData()}));};var getBlogById=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return placesService.get(id);case 3:response=_context.sent;if(response.data.success){setPlaceUpdate(response.data.data);setPlace(response.data.data);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getBlogById(_x){return _ref.apply(this,arguments);};}();useEffect(function(){getBlogById(idUpdate);},[idUpdate]);var handleUpdate=function handleUpdate(){var data=_objectSpread(_objectSpread({},place),placeUpdate);var FormData=require('form-data');var placeData=new FormData();placeData.append('name',data.name);placeData.append('address',data.address);placeData.append('price',data.price);// Iterate over all selected files\nArray.from(data.file).forEach(function(file){placeData.append('files',file);});placeData.append('detail',data.detail);placeData.append('numberView',data.numberView);placeData.append('numberComment',data.numberComment);placeData.append('numberLike',data.numberLike);var update=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,data){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return placesService.update(id,data);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function update(_x2,_x3){return _ref2.apply(this,arguments);};}();try{update(localStorage.getItem('id_place'),placeData);alert(\"Cập nhật thành công\");document.location.reload(true);}catch(error){console.log(\"Fail call api \"+error);}};var setParams=function setParams(event){if(event.target.name!==\"file\"){setPlaceUpdate(_objectSpread(_objectSpread({},placeUpdate),{},_defineProperty({},event.target.name,event.target.value)));}else{setPlaceUpdate(_objectSpread(_objectSpread({},placeUpdate),{},_defineProperty({},event.target.name,event.target.files)));}};return/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\" c\\u1EADp nh\\u1EADt \\u0111\\u1ECBa \\u0111i\\u1EC3m du l\\u1ECBch \",idUpdate]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"T\\xEAn \\u0111\\u1ECBa \\u0111i\\u1EC3m\"}),/*#__PURE__*/_jsx(\"input\",{type:\"input\",name:\"name\",className:\"title form-control\",onChange:setParams,value:placeUpdate===null||placeUpdate===void 0?void 0:placeUpdate.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleFormControlTextarea1\",children:\"\\u0110\\u1ECBa \\u0111i\\u1EC3m\"}),/*#__PURE__*/_jsx(\"input\",{type:\"input\",name:\"address\",className:\"title form-control\",onChange:setParams,value:placeUpdate===null||placeUpdate===void 0?void 0:placeUpdate.address})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleFormControlTextarea1\",children:\"Gi\\xE1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"input\",name:\"price\",className:\"title form-control\",onChange:setParams,value:placeUpdate===null||placeUpdate===void 0?void 0:placeUpdate.price})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleFormControlFile1\",children:\"Ch\\u1ECDn \\u1EA3nh\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"file\",className:\"form-control-file\",multiple:\"multiple\",onChange:setParams})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleFormControlFile1\",children:\"M\\xF4 t\\u1EA3\"}),/*#__PURE__*/_jsx(CKEditor,{editor:ClassicEditor,name:\"detail\",onReady:function onReady(editor){},onChange:handleCkEditor,data:placeUpdate===null||placeUpdate===void 0?void 0:placeUpdate.detail})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary btn-submit\",onClick:handleUpdate,children:\"Submit\"})]});}export default FormPlace;","map":{"version":3,"sources":["D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/src/components/admin/place_admin/FormPlace.js"],"names":["ClassicEditor","CKEditor","React","useContext","useEffect","useState","PlaceContext","placesService","FormPlace","idUpdate","placeUpdate","setPlaceUpdate","place","setPlace","handleCkEditor","event","editor","getData","getBlogById","id","get","response","data","success","console","log","handleUpdate","FormData","require","placeData","append","name","address","price","Array","from","file","forEach","detail","numberView","numberComment","numberLike","update","localStorage","getItem","alert","document","location","reload","error","setParams","target","value","files"],"mappings":"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","sourcesContent":["import ClassicEditor from '@ckeditor/ckeditor5-build-classic'\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react'\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { PlaceContext } from '../../../contexts/PlaceContext';\r\nimport placesService from '../../../services/placesService';\r\n\r\nfunction FormPlace() {\r\n    const {idUpdate} = useContext(PlaceContext);\r\n    const [placeUpdate,setPlaceUpdate] = useState();\r\n    const [place,setPlace] = useState();\r\n     \r\n     \r\n    const handleCkEditor = (event, editor) => {\r\n        setPlaceUpdate({...placeUpdate,'detail':editor.getData()})\r\n     }\r\n    \r\n     const getBlogById = async (id)=>{\r\n        try {\r\n            const response= await placesService.get(id);\r\n            if(response.data.success) {\r\n                setPlaceUpdate(response.data.data);\r\n                setPlace(response.data.data);\r\n                }           \r\n        } catch(err) {\r\n            console.log(err);     \r\n        }     \r\n    }\r\n     useEffect(() => {\r\n        getBlogById(idUpdate);\r\n     }, [idUpdate])\r\n    \r\n     const handleUpdate = () =>{\r\n        const data = {...place,...placeUpdate};\r\n\r\n        var FormData = require('form-data');\r\n        const placeData = new FormData();\r\n        placeData.append('name', data.name);\r\n        placeData.append('address', data.address);\r\n        placeData.append('price', data.price);\r\n         // Iterate over all selected files\r\n        Array.from( data.file).forEach(file => {\r\n            placeData.append('files', file);\r\n        });\r\n        placeData.append('detail',data.detail);\r\n        placeData.append('numberView',data.numberView);\r\n        placeData.append('numberComment',data.numberComment);\r\n        placeData.append('numberLike',data.numberLike);\r\n        \r\n    \r\n        const update = async (id,data)=>{\r\n            await placesService.update(id, data);    \r\n    }\r\n        try{\r\n            update(localStorage.getItem('id_place'), placeData); \r\n            alert(\"Cập nhật thành công\")\r\n            document.location.reload(true);   \r\n        }catch(error) {\r\n            console.log(\"Fail call api \"+error);\r\n            }\r\n    }\r\n     \r\n    \r\n     const setParams = (event) => {\r\n        if(event.target.name!==\"file\"){\r\n            setPlaceUpdate({...placeUpdate,[event.target.name]:event.target.value});\r\n        }else{\r\n            setPlaceUpdate({...placeUpdate,[event.target.name]:event.target.files});\r\n        }  \r\n    }\r\n     \r\n     \r\n    return (\r\n        <form>\r\n        <div className=\"form-group\">\r\n        <h2> cập nhật địa điểm du lịch {idUpdate}</h2>\r\n            <label htmlFor=\"exampleInputEmail1\">Tên địa điểm</label>\r\n            <input type=\"input\" name=\"name\" className=\"title form-control\" onChange={setParams}   value={placeUpdate?.name}    />\r\n        </div>\r\n        <div className=\"form-group\">\r\n            <label htmlFor=\"exampleFormControlTextarea1\">Địa điểm</label>\r\n            <input type=\"input\" name=\"address\" className=\"title form-control\" onChange={setParams} value={placeUpdate?.address}    />       \r\n        </div>\r\n        <div className=\"form-group\">\r\n            <label htmlFor=\"exampleFormControlTextarea1\">Giá</label>\r\n            <input type=\"input\" name=\"price\" className=\"title form-control\" onChange={setParams}   value={placeUpdate?.price}    />       \r\n        </div>\r\n        <div className=\"form-group\">    \r\n            <label htmlFor=\"exampleFormControlFile1\">Chọn ảnh</label>\r\n            <input type=\"file\" name=\"file\" className=\"form-control-file\" multiple=\"multiple\" onChange={setParams}   />\r\n        </div>\r\n        <div className=\"form-group\">    \r\n            <label htmlFor=\"exampleFormControlFile1\">Mô tả</label>\r\n            <CKEditor \r\n                editor={ClassicEditor}\r\n                name = \"detail\"\r\n                onReady={ editor =>{\r\n                }\r\n              }\r\n              onChange={handleCkEditor}\r\n              \r\n              data={placeUpdate?.detail}\r\n                />\r\n        </div>           \r\n        <button type=\"button\" className=\"btn btn-primary btn-submit\" onClick={handleUpdate}>Submit</button>\r\n      </form>\r\n        \r\n    )\r\n    }\r\n    \r\n\r\n \r\n\r\nexport default FormPlace\r\n"]},"metadata":{},"sourceType":"module"}