{"ast":null,"code":"import _asyncToGenerator from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\photo\\\\home\\\\Mytravel\\\\Front-End-ReactJs\\\\travel-new\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import placesService from'../services/placesService';import React,{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var PlaceContext=/*#__PURE__*/React.createContext();function PlaceProvider(_ref){var children=_ref.children;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),places=_useState2[0],setPlaces=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),placeByPage=_useState4[0],SetPlaceByPage=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),idUpdate=_useState6[0],setIdUpdate=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),idDelete=_useState8[0],setIdDelete=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),status=_useState10[0],setStatus=_useState10[1];var _useState11=useState(1),_useState12=_slicedToArray(_useState11,2),page=_useState12[0],setPage=_useState12[1];var setUpdate=function setUpdate(){setStatus(false);};var getPlaceUpdate=function getPlaceUpdate(place){localStorage.removeItem(\"id_place\");localStorage.setItem(\"id_place\",place.id);setIdUpdate(place.id);setStatus(true);};var handlePage=function handlePage(page){setPage(page);};var executeDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return placesService.remove(id);case 2:case\"end\":return _context.stop();}}},_callee);}));return function executeDelete(_x){return _ref2.apply(this,arguments);};}();var handleDelete=function handleDelete(id){try{executeDelete(id);setIdDelete(id);}catch(err){console.log(\"Fail call api \"+err);}};useEffect(function(){var fethApi=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return placesService.getAll();case 2:response=_context2.sent;setPlaces(response.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fethApi(){return _ref3.apply(this,arguments);};}();fethApi();},[]);useEffect(function(){var fethApi=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(page){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return placesService.getByPage(page);case 2:response=_context3.sent;SetPlaceByPage(response.data);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function fethApi(_x2){return _ref4.apply(this,arguments);};}();fethApi(page);},[page,idDelete,idUpdate,status]);return/*#__PURE__*/_jsx(PlaceContext.Provider,{value:{status:status,setUpdate:setUpdate,idUpdate:idUpdate,getPlaceUpdate:getPlaceUpdate,handleDelete:handleDelete,placeByPage:placeByPage.data,places:places.data,handlePage:handlePage},children:children});}export{PlaceProvider,PlaceContext};","map":{"version":3,"sources":["D:/photo/home/Mytravel/Front-End-ReactJs/travel-new/src/contexts/PlaceContext.js"],"names":["placesService","React","useEffect","useState","PlaceContext","createContext","PlaceProvider","children","places","setPlaces","placeByPage","SetPlaceByPage","idUpdate","setIdUpdate","idDelete","setIdDelete","status","setStatus","page","setPage","setUpdate","getPlaceUpdate","place","localStorage","removeItem","setItem","id","handlePage","executeDelete","remove","handleDelete","err","console","log","fethApi","getAll","response","data","getByPage"],"mappings":"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","sourcesContent":["import placesService from '../services/placesService'\r\nimport React, { useEffect , useState } from 'react'\r\n\r\nconst PlaceContext=React.createContext();\r\nfunction PlaceProvider({children}) {\r\n\r\n    const [places, setPlaces] = useState({});\r\n    const [placeByPage, SetPlaceByPage] = useState({});\r\n    const [idUpdate, setIdUpdate] = useState(0);\r\n    const [idDelete, setIdDelete] = useState(0);\r\n    const [status,setStatus] = useState(false);\r\n    const [page, setPage] = useState(1);\r\n\r\n    const setUpdate = ()=>{\r\n        setStatus(false);\r\n    }\r\n\r\n    const getPlaceUpdate = (place)=>{\r\n        localStorage.removeItem(\"id_place\");\r\n        localStorage.setItem(\"id_place\",place.id);\r\n        setIdUpdate(place.id);\r\n        setStatus(true);\r\n    }\r\n     \r\n\r\n    const handlePage = (page) =>{\r\n        setPage(page);\r\n    }\r\n\r\n    \r\n\r\n\r\n    const executeDelete = async (id)=>{\r\n         await placesService.remove(id);    \r\n    }\r\n \r\n    const handleDelete = (id) =>{\r\n        try{\r\n            executeDelete(id);\r\n            setIdDelete(id);\r\n        }\r\n        catch(err){\r\n            console.log(\"Fail call api \"+err);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    useEffect( ()=>{\r\n        const fethApi = async ()=>{\r\n            const response= await placesService.getAll(); \r\n            setPlaces(response.data);\r\n        }\r\n        fethApi();\r\n        },[])\r\n\r\n    useEffect( ()=>{\r\n        const fethApi = async (page)=>{\r\n            const response= await placesService.getByPage(page);    \r\n            SetPlaceByPage(response.data);\r\n        }\r\n        fethApi(page);\r\n        },[page,idDelete,idUpdate,status])\r\n   \r\n    return (\r\n        <PlaceContext.Provider value={{status:status,setUpdate:setUpdate,idUpdate:idUpdate, getPlaceUpdate:getPlaceUpdate, handleDelete:handleDelete,placeByPage:placeByPage.data, places:places.data, handlePage:handlePage}}>\r\n            {children}\r\n        </PlaceContext.Provider>\r\n    )\r\n}\r\n\r\nexport  {PlaceProvider,PlaceContext};\r\n"]},"metadata":{},"sourceType":"module"}